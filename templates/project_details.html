{% extends "base.html" %}

{% block content %}
    <div class="container mt-5">
        <h2>项目详情</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>项目名称</th>
                    <th>客户名称</th>
                    <th>项目规模</th>
                    <th>开始日期</th>
                    <th>项目地点</th>
                    <th>销售人员</th>
                    <th>项目阶段</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ project_details[0].id }}</td>
                    <td>{{ project_details[0].name }}</td>
                    <td>{{ project_details[0].client_name }}</td>
                    <td>{{ project_details[0].scale }}</td>
                    <td>{{ project_details[0].start_date }}</td>
                    <td>{{ project_details[0].location }}</td>
                    <td>{{ project_details[0].sales_person }}</td>
                    <td>
                        {% if project_details[0].stage == '1' %}立项中|初步沟通{% endif %}
                        {% if project_details[0].stage == '2' %}立项中|提交立项申请{% endif %}
                        {% if project_details[0].stage == '3' %}已立项|编制解决方案{% endif %}
                        {% if project_details[0].stage == '4' %}已立项|编制设计方案{% endif %}
                        {% if project_details[0].stage == '5' %}已立项|编制招投标参数{% endif %}
                        {% if project_details[0].stage == '6' %}招投标|编制参数{% endif %}
                        {% if project_details[0].stage == '7' %}招投标|已挂网{% endif %}
                        {% if project_details[0].stage == '8' %}招投标|等待结果{% endif %}
                        {% if project_details[0].stage == '9' %}已中标|已公示{% endif %}
                        {% if project_details[0].stage == '10' %}已中标|已获取中标通知书{% endif %}
                        {% if project_details[0].stage == '11' %}已中标|签署合同{% endif %}
                        {% if project_details[0].stage == '12' %}已完成|转入项目实施{% endif %}
                    </td>
                </tr>
            </tbody>
        </table>
        <h3>更新记录</h3>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>更新内容</th>
                    <th>更新日期</th>
                    <th>更新用户</th>
                </tr>
            </thead>
            <tbody>
                {% for detail in project_details %}
                    <tr>
                        <td>{{ detail.update_content }}</td>
                        <td>{{ detail.update_date }}</td>
                        <td>{{ detail.updated_by_username }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <div class="d-flex justify-content-center">
            <a href="{{ url_for('update_project', project_id=project_details[0].id) }}" class="btn btn-info">添加更新</a>
        </div>
    </div>
{% endblock %}